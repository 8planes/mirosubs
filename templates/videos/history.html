{% extends "base.html" %}

{% load escapejs paginator widget %}

{% block css %}
    {{ block.super }}
    <link href="{{ MEDIA_URL }}css/mirosubs-widget.css" media="all" type="text/css" rel="stylesheet" />
    <style>
        div.mirosubs-widget {
            position: relative;
        }
        
        .mirosubs-videoDiv {
            text-align: center;
        }
        
        .mirosubs-videoDiv video {
            width: 460px;
        }
        
        #embed {
            white-space: pre;
            background: #eee;
            boder: #666;
        }
    </style>
{% endblock %}

{% block scripts %}
    {{ block.super }}
    {% include "widget/_js_onsite_dependencies.html" %}
    <script type="text/javascript">
        //create url template
        var DIFFING_URL = function(){
            var url = '{% block diffing_link %}{% url videos:diffing 11111 22222 %}{% endblock %}';
            return url.replace(/11111/, '<<first_pk>>').replace(/22222/, '<<second_pk>>');
        }();
        
        function get_compare_link(first_pk, second_pk){
            //set values from arguents
            return DIFFING_URL.replace(/<<first_pk>>/, first_pk).replace(/<<second_pk>>/, second_pk);
        }
        
        jQuery(document).ready(function($){
            $('.version_checkbox:first').attr('checked', 'checked');
            
            $('.version_checkbox').change(function(){
                var $this = $(this);
                var checked_length = $('.version_checkbox:checked').length;
                
                if ($this.attr('checked') && (checked_length > 2)) {
                    $this.attr('checked', '');
                }
            });
            
            $('.compare_versions_button').click(function(){
                var $checked = $('.version_checkbox:checked');
                if ($checked.length !== 2) {
                    alert('Select two revisions for compare, please');
                }
                else {
                    var url = get_compare_link($checked[0].value, $checked[1].value);
                    window.location.replace(url);
                }
            });
            //******** Tabs ********//
            var $last_active_tab = $('#revision-tab');
            $('.video_tabs a').click(function(){
                $last_active_tab.hide();
                $last_active_tab = $($(this).attr('href')).show();
                $('.video_tabs li').removeClass('active');
                $(this).parent('li').addClass('active');
                return false;
            });
        });
    </script>
{% endblock %}

{% block main_content %}
    <h2>{{ video }}</h2>
    <p class="what_lang">
        {% block lang_display %} 
        in <a href="{% url videos:video video_id=video.video_id %}">Original Language</a>
        <a href="other_lang">Other Languages</a>
        {% endblock %}
    </p>
    <div class="left_column">
        {% widget widget_params %}
    </div>
    <div class="right_column">
            </div>
    
    <div class="clearboth">&nbsp;</div>


    
    <ul class="video_tabs">
      <li><a href="#trascript-tab">Languages (4)</a></li>
      <li><a href="#comments-tab">Comments (12)</a></li>
      <li class="active"><a href="#revision-tab">Activity Stream</a></li>

    </ul>
    
    <div id="revision-tab" class="tab">
        {% if revision_list %}
           {% if is_paginated %}{% ordered_paginator 3 %}{% endif %} 

        {% block table %}
        <ul class="table_head">
          <li class="td_user">{% ordered_column "user" "User" %}</li>
          <li class="td_time">{% ordered_column "text" "Happened" %}</li>
        </ul>
        
        <ul class="table_body"> 
          <li>
              <span class="td_user rolled_back"><a href="#">morganknutson</a> Rolled back <a href="#">Language</a> to an earlier version <a href="#" class="view_revision">View</a></span>
              <span class="td_time">22 hours ago</span>
          </li>
    
          <li class="table_user">
              <span class="td_user thumb_up"><a href="#">Username</a> gave <a href="#">Language</a> a thumbs up</span>
              <span class="td_time">1 Day Ago</span>
          </li>       
    
          <li class="table_user">
              <span class="td_user thumb_down"><a href="#">Username</a> gave <a href="#">Language</a> a thumbs down</span>
              <span class="td_time">2 Days Ago</span>
          </li>      
        
          <li class="table_user">
              <span class="td_user commented"><a href="#">Username</a> commented on this Video</span>
              <span class="td_time">1 Week Ago</span>
          </li>   


          <li class="table_user">
              <span class="td_user language_rating"><a href="#">Language</a> has a B+ rating</span>
              <span class="td_time">2 Weeks Ago</span>
          </li>   

          <li class="table_user">
              <span class="td_user language_begins"><a href="#">Username</a> started <a href="#">Language</a> subtitles</span>
              <span class="td_time">1 Month Ago</span>
          </li>   

          <li class="table_user">
              <span class="td_user video_begins"><a href="#">Username</a> added this video</span>
              <span class="td_time">2 Months Ago</span>
          </li>   
        
        </ul> 
        


           <div style="clear: both"></div>
           {% endblock %}
       {% else %}
            <div class="nothing"><strong>This revision has no subtitles</strong><br />
Either no subtitles have been entered, or they were deleted.</div>
       {% endif %}
   </div>
   
   <div style="display: none" id="comments-tab" class="tab">
        <ul class="table_body comments">
            {% for item in revision_list %}
 
                    <li class="table_comment">
                        <div class="table_user_deets">                         
                          <span class="user_thumb"></span>
                         
                          <a href="#">UserName</a>
                          <span class="comment_date">45 days ago</span>
                        </div>
                        <span class="comment_text">
                            <a href="#" class="small_button floatright"><span>Reply</span></a>

                            <p>
                                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed felis nulla, pellentesque a pharetra nec, molestie vel eros. 
                            </p>
                            <p>
                                Donec ut egestas mi. Ut mollis commodo nibh, quis dapibus lacus adipiscing a. Pellentesque tincidunt adipiscing vestibulum. Mauris consequat consequat fringilla. Curabitur lobortis neque non nibh elementum et euismod magna bibendum. Mauris iaculis augue non libero consectetur at vulputate lacus mattis. Proin gravida ipsum vitae sapien aliquet tristique. In hac habitasse platea dictumst. Morbi quis lectus sed libero molestie fermentum vel ac mauris. 
                            </p>
                            <p>
                                Donec scelerisque imperdiet varius. Duis luctus, dolor ac fermentum sodales, risus lorem cursus lectus, vel laoreet tellus diam vitae dolor. Ut vehicula ultricies venenatis. Suspendisse elementum pretium fermentum. Ut ullamcorper viverra rutrum. Fusce luctus rutrum gravida.
                            </p>
                        </span>
                            <ul>
                              <li class="table_comment">
                                <div class="table_user_deets">                         
                                  <span class="user_thumb"></span>
                                 
                                  <a href="#">UserName</a>
                                  <span class="comment_date">45 days ago</span>
                                </div>
                                <span class="comment_text">
                                                              <a href="#" class="small_button floatright"><span>Reply</span></a>

                                    <p>
                                        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed felis nulla, pellentesque a pharetra nec, molestie vel eros. 
                                    </p>
                                    <p>
                                        Donec ut egestas mi. Ut mollis commodo nibh, quis dapibus lacus adipiscing a. Pellentesque tincidunt adipiscing vestibulum. Mauris consequat consequat fringilla. Curabitur lobortis neque non nibh elementum et euismod magna bibendum. Mauris iaculis augue non libero consectetur at vulputate lacus mattis. Proin gravida ipsum vitae sapien aliquet tristique. In hac habitasse platea dictumst. Morbi quis lectus sed libero molestie fermentum vel ac mauris. 
                                    </p>
                                    <p>
                                        Donec scelerisque imperdiet varius. Duis luctus, dolor ac fermentum sodales, risus lorem cursus lectus, vel laoreet tellus diam vitae dolor. Ut vehicula ultricies venenatis. Suspendisse elementum pretium fermentum. Ut ullamcorper viverra rutrum. Fusce luctus rutrum gravida.
                                    </p>
                                </span>
                                <ul>
                                  <li class="table_comment">
                                    <div class="table_user_deets">                         
                                      <span class="user_thumb"></span>
                                     
                                      <a href="#">UserName</a>
                                      <span class="comment_date">45 days ago</span>
                                    </div>
                                    <span class="comment_text">
                                                                  <a href="#" class="small_button floatright"><span>Reply</span></a>

                                        <p>
                                            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed felis nulla, pellentesque a pharetra nec, molestie vel eros. 
                                        </p>
                                        <p>
                                            Donec ut egestas mi. Ut mollis commodo nibh, quis dapibus lacus adipiscing a. Pellentesque tincidunt adipiscing vestibulum. Mauris consequat consequat fringilla. Curabitur lobortis neque non nibh elementum et euismod magna bibendum. Mauris iaculis augue non libero consectetur at vulputate lacus mattis. Proin gravida ipsum vitae sapien aliquet tristique. In hac habitasse platea dictumst. Morbi quis lectus sed libero molestie fermentum vel ac mauris. 
                                        </p>
                                        <p>
                                            Donec scelerisque imperdiet varius. Duis luctus, dolor ac fermentum sodales, risus lorem cursus lectus, vel laoreet tellus diam vitae dolor. Ut vehicula ultricies venenatis. Suspendisse elementum pretium fermentum. Ut ullamcorper viverra rutrum. Fusce luctus rutrum gravida.
                                        </p>
                                    </span>

                                      <ul>
                                        <li class="table_comment">
                                          <div class="table_user_deets">                         
                                            <span class="user_thumb"></span>
                                           
                                            <a href="#">UserName</a>
                                            <span class="comment_date">45 days ago</span>
                                          </div>
                                          <span class="comment_text">
                                                                        <a href="#" class="small_button floatright"><span>Reply</span></a>

                                              <p>
                                                  Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed felis nulla, pellentesque a pharetra nec, molestie vel eros. 
                                              </p>
                                              <p>
                                                  Donec ut egestas mi. Ut mollis commodo nibh, quis dapibus lacus adipiscing a. Pellentesque tincidunt adipiscing vestibulum. Mauris consequat consequat fringilla. Curabitur lobortis neque non nibh elementum et euismod magna bibendum. Mauris iaculis augue non libero consectetur at vulputate lacus mattis. Proin gravida ipsum vitae sapien aliquet tristique. In hac habitasse platea dictumst. Morbi quis lectus sed libero molestie fermentum vel ac mauris. 
                                              </p>
                                              <p>
                                                  Donec scelerisque imperdiet varius. Duis luctus, dolor ac fermentum sodales, risus lorem cursus lectus, vel laoreet tellus diam vitae dolor. Ut vehicula ultricies venenatis. Suspendisse elementum pretium fermentum. Ut ullamcorper viverra rutrum. Fusce luctus rutrum gravida.
                                              </p>
                                          </span>


                                            <ul>
                                              <li class="table_comment">
                                                <div class="table_user_deets">                         
                                                  <span class="user_thumb"></span>
                                                 
                                                  <a href="#">UserName</a>
                                                  <span class="comment_date">45 days ago</span>
                                                </div>
                                                <span class="comment_text">
                                                                              <a href="#" class="small_button floatright"><span>Reply</span></a>

                                                    <p>
                                                        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed felis nulla, pellentesque a pharetra nec, molestie vel eros. 
                                                    </p>
                                                    <p>
                                                        Donec ut egestas mi. Ut mollis commodo nibh, quis dapibus lacus adipiscing a. Pellentesque tincidunt adipiscing vestibulum. Mauris consequat consequat fringilla. Curabitur lobortis neque non nibh elementum et euismod magna bibendum. Mauris iaculis augue non libero consectetur at vulputate lacus mattis. Proin gravida ipsum vitae sapien aliquet tristique. In hac habitasse platea dictumst. Morbi quis lectus sed libero molestie fermentum vel ac mauris. 
                                                    </p>
                                                    <p>
                                                        Donec scelerisque imperdiet varius. Duis luctus, dolor ac fermentum sodales, risus lorem cursus lectus, vel laoreet tellus diam vitae dolor. Ut vehicula ultricies venenatis. Suspendisse elementum pretium fermentum. Ut ullamcorper viverra rutrum. Fusce luctus rutrum gravida.
                                                    </p>
                                                </span>
                                               </li>
                                            </ul>


                                         </li>
                                      </ul>

                                   </li>
                                </ul>
                              </li>
                              <li class="table_comment">
                                <div class="table_user_deets">                         
                                  <span class="user_thumb"></span>
                                 
                                  <a href="#">UserName</a>
                                  <span class="comment_date">45 days ago</span>
                                </div>
                                <span class="comment_text">
                                  
                                    <p>
                                        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed felis nulla, pellentesque a pharetra nec, molestie vel eros. 
                                    </p>
                                    <p>
                                        Donec ut egestas mi. Ut mollis commodo nibh, quis dapibus lacus adipiscing a. Pellentesque tincidunt adipiscing vestibulum. Mauris consequat consequat fringilla. Curabitur lobortis neque non nibh elementum et euismod magna bibendum. Mauris iaculis augue non libero consectetur at vulputate lacus mattis. Proin gravida ipsum vitae sapien aliquet tristique. In hac habitasse platea dictumst. Morbi quis lectus sed libero molestie fermentum vel ac mauris. 
                                    </p>
                                    <p>
                                        Donec scelerisque imperdiet varius. Duis luctus, dolor ac fermentum sodales, risus lorem cursus lectus, vel laoreet tellus diam vitae dolor. Ut vehicula ultricies venenatis. Suspendisse elementum pretium fermentum. Ut ullamcorper viverra rutrum. Fusce luctus rutrum gravida.
                                    </p>
                                </span>
                              </li>
                            </ul>
                    </li>
 
 
        {% endfor %}
       </ul> 
       <div style="clear: both"></div>     
   </div>
   
   <div style="display: none" id="trascript-tab" class="tab">
       
        <ul class="table_head">
          <li class="table_language">Language</li>
          <li class="table_rating">Rating</li>
          <li class="table_done">% Done</li>
        </ul>

        <ul class="table_body"> 
            <li>
              <ul>
                <li class="table_language">English</li>
                <li class="table_rating">A+</li>
                <li class="table_done"><span class="progress"><span class="completion ten_percent red"></span></span></li>
              </ul>
            </li>
            <li>
              <ul>
                <li class="table_language">Hebrew</li>
                <li class="table_rating">A+</li>
                <li class="table_done"><span class="progress"><span class="completion twenty_percent red"></span></span></li>
              </ul>
            </li>
            <li>
              <ul>
                <li class="table_language">Korean</li>
                <li class="table_rating">A+</li>
                <li class="table_done"><span class="progress"><span class="completion thirty_percent red"></span></span></li>
              </ul>
            </li>
            <li>
              <ul>
                <li class="table_language">Japanese</li>
                <li class="table_rating">A+</li>
                <li class="table_done"><span class="progress"><span class="completion fourty_percent yellow"></span></span></li>
              </ul>
            </li>
            <li>
              <ul>
                <li class="table_language">Dutch</li>
                <li class="table_rating">A+</li>
                <li class="table_done"><span class="progress"><span class="completion fifty_percent green"></span></span></li>
              </ul>
            </li>              

       </ul> 

       <div style="clear: both"></div>   
   </div>
{% endblock %}

