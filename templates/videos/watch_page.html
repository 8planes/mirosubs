{% extends "base.html" %}

{% load i18n %}

{% block body_attrs %}id="watch"{% endblock %}

{% block scripts %}
    {{ block.super }}
    <script src="{% url videos:rpc_api %}" type="text/javascript"></script>  
    <script src="{{ MEDIA_URL }}js/jquery.address-1.4.js" type="text/javascript"></script>
    <script src="{{ MEDIA_URL }}js/jquery.ajax-paginator.js" type="text/javascript"></script>
{% endblock %}

{% block main_content %}
<div id="watch_search">
    <span class="icon"></span>
    <input type="text" value="Search videos" />
    <a id="advanced_search" href="">
    <div id="advanced_menu">
        <div class="menu_item videos_in">
            <h3>Videos In</h3>
            <select>
                <option>English (US)</option>
            </select>
        </div><!-- // menu_item -->
        <div class="menu_item">
            <h3>Subtitles into</h3>
            <select>
                <option>English (US)</option>
            </select>
            <button>
                Search
            </button>
        </div><!-- // menu_item -->
    </div><!-- // advanced_menu -->
    </a>
</div><!-- // watch_search -->

<h1>{% trans "Watch Subtitled Videos" %}</h1>

<div class="pod">
    <div class="hd">
        <h2>{% trans "Featured Videos" %}</h2>
    </div><!-- // hd -->
    <div class="bd">
        <ul class="video_list clearfix">
            {% for v in featured_videos %}
                {% with v.object as video %}
                    {% include 'videos/_video.html' %}
                {% endwith %}
            {% endfor %}
        </ul><!--// video_list -->
    </div><!-- // bd -->
</div><!-- // pod -->
<br/>
<div class="pod">
    <div class="hd">
        <h2>{% trans "Popular Videos" %}</h2>
    </div><!-- // hd -->
    <div class="bd">
        <ul class="video_list clearfix">
            {% for v in popular_videos %}
                {% with v.object as video %}
                    {% include 'videos/_video.html' %}
                {% endwith %}
            {% endfor %}
        </ul><!--// video_list -->
    </div><!-- // bd -->
</div><!-- // pod -->
<br/>
<div class="pod">
    <div class="hd">
        <h2>{% trans "The Latest" %}</h2>
    </div><!-- // hd -->
    <div class="bd">
        <div class="watch-page-content"></div>
        <!-- // pagination start -->
        <div class="pages ajax-pagination">
            <a href="#" class="pag_prev" style="float: left;">
                Prev
            </a>
            <span class="page-info">
                <span class="from-value">{{ from_value }}</span> - 
                <span class="to-value">{{ to_value }}</span> 
                {% trans "of" %} 
                <span class="total-value">{{ hits }}</span>
                {% blocktrans count hits as hits %}
                    video
                {% plural %}
                    videos
                {% endblocktrans %}
            </span>
            <span class="loading-indicator" style="display: none;">
                {% trans "Loading..." %}
            </span>
            <a href="#" class="pag_next" href="" style="float: right;">
                Next
            </a>
        </div>
        <!-- // pagination end-->
    </div><!-- // bd -->
</div><!-- // pod -->
<script type="text/javascript">
    jQuery(function($){
        $('.ajax-pagination').ajaxPaginator({
            container: $('.watch-page-content'),
            onPageChange: function(page, callback){
                VideosApi.load_watch_page(page, function(data){
                    this.options.container.html(data.content || '');
                    callback.call(this, data);
                }, this);
            },
        });
    });
</script>
{% endblock %}